import{d as C,x as q,c as o,a as t,F as v,r as m,t as a,p as r,b as I,w as S,j as p,f as _,A as D,g as N,o as l,n as g,h as w,_ as V}from"./index-DKfT9gvk.js";const z={class:"orders-view"},B={class:"container"},L={class:"orders-filter"},R=["onClick"],$={key:0,class:"filter-count"},j={key:0,class:"order-success"},A={key:1,class:"no-orders"},E={key:2,class:"orders-list"},H={class:"order-header"},J={class:"order-info"},P={class:"order-time"},G={class:"order-details"},K={class:"order-items"},Q={class:"item-name"},U={class:"item-price"},W={class:"order-summary"},X={class:"summary-row"},Y={class:"address"},Z={class:"summary-row"},tt={class:"summary-row"},st={key:0,class:"summary-row"},et={class:"notes"},nt={class:"order-total"},at={class:"total-row"},ot={class:"total-row"},lt={key:0},it={key:1,class:"free"},dt={key:0,class:"total-row discount"},rt={class:"total-row grand-total"},ut={class:"order-actions"},ct={key:0,class:"action-btn reorder-btn"},pt={key:1,class:"action-btn track-btn"},vt=C({__name:"OrdersView",setup(mt){const u=p("all"),c=p(!1),y=p(""),i=p([]),b=_(()=>[{value:"all",label:"å…¨éƒ¨è®¢å•",count:i.value.length},{value:"pending",label:"å¾…å¤„ç†",count:i.value.filter(e=>e.status==="pending").length},{value:"preparing",label:"å‡†å¤‡ä¸­",count:i.value.filter(e=>e.status==="preparing").length},{value:"on_the_way",label:"é…é€ä¸­",count:i.value.filter(e=>e.status==="on_the_way").length},{value:"delivered",label:"å·²å®Œæˆ",count:i.value.filter(e=>e.status==="delivered").length}]),h=_(()=>u.value==="all"?i.value:i.value.filter(e=>e.status===u.value)),f=_(()=>{const e=new Date;return e.setMinutes(e.getMinutes()+30),e.toLocaleTimeString("zh-CN",{hour:"2-digit",minute:"2-digit"})}),k=()=>{const e=localStorage.getItem("foodOrders");e?i.value=JSON.parse(e):i.value=[{orderId:"ORD20231215001",orderTime:"2023-12-15T18:30:00",status:"delivered",items:[{id:1,name:"å®«ä¿é¸¡ä¸",price:38,quantity:1},{id:4,name:"æ„å¤§åˆ©é¢",price:48,quantity:1},{id:6,name:"æŠ¹èŒ¶æ‹¿é“",price:28,quantity:2}],name:"å¼ ä¸‰",phone:"13800138000",address:"åŒ—äº¬å¸‚æœé˜³åŒºæœ›äº¬SOHO T1åº§",deliveryTime:"asap",paymentMethod:"alipay",notes:"ä¸è¦æ”¾è‘±",subtotal:114,deliveryFee:0,discount:10,total:104},{orderId:"ORD20231214002",orderTime:"2023-12-14T19:15:00",status:"on_the_way",items:[{id:2,name:"éº»è¾£é¦™é”…",price:68,quantity:1},{id:5,name:"é²œæ¦¨æ©™æ±",price:18,quantity:2}],name:"æå››",phone:"13900139000",address:"åŒ—äº¬å¸‚æµ·æ·€åŒºä¸­å…³æ‘å¤§è¡—",deliveryTime:"specific",paymentMethod:"wechat",subtotal:104,deliveryFee:0,discount:10,total:94}]},M=e=>new Date(e).toLocaleString("zh-CN",{year:"numeric",month:"long",day:"numeric",hour:"2-digit",minute:"2-digit"}),T=e=>({pending:"å¾…ç¡®è®¤",preparing:"å‡†å¤‡ä¸­",on_the_way:"é…é€ä¸­",delivered:"å·²å®Œæˆ",cancelled:"å·²å–æ¶ˆ"})[e]||"æœªçŸ¥çŠ¶æ€",x=e=>({pending:"status-pending",preparing:"status-preparing",on_the_way:"status-on-the-way",delivered:"status-delivered",cancelled:"status-cancelled"})[e]||"",F=e=>({alipay:"æ”¯ä»˜å®",wechat:"å¾®ä¿¡æ”¯ä»˜",cash:"è´§åˆ°ä»˜æ¬¾",card:"åœ¨çº¿æ”¯ä»˜"})[e]||e;return q(()=>{k();const e=D();e.query.success==="true"&&e.query.orderId&&(c.value=!0,y.value=e.query.orderId,setTimeout(()=>{c.value=!1},5e3))}),(e,s)=>{const O=N("router-link");return l(),o("div",z,[t("div",B,[s[16]||(s[16]=t("div",{class:"orders-header"},[t("h1",null,"æˆ‘çš„è®¢å•"),t("p",null,"æŸ¥çœ‹æ‚¨çš„æ‰€æœ‰è®¢å•è®°å½•")],-1)),t("div",L,[(l(!0),o(v,null,m(b.value,n=>(l(),o("button",{key:n.value,onClick:d=>u.value=n.value,class:g(["filter-btn",{active:u.value===n.value}])},[w(a(n.label)+" ",1),n.count?(l(),o("span",$,a(n.count),1)):r("",!0)],10,R))),128))]),c.value?(l(),o("div",j,[s[1]||(s[1]=t("div",{class:"success-icon"},"ğŸ‰",-1)),s[2]||(s[2]=t("h2",null,"ä¸‹å•æˆåŠŸï¼",-1)),t("p",null,"è®¢å•å·ï¼š"+a(y.value),1),t("p",null,"æˆ‘ä»¬æ­£åœ¨ä¸ºæ‚¨å‡†å¤‡ç¾é£Ÿï¼Œé¢„è®¡ "+a(f.value)+" é€è¾¾",1),t("button",{onClick:s[0]||(s[0]=n=>c.value=!1),class:"close-btn"},"å…³é—­")])):r("",!0),h.value.length===0?(l(),o("div",A,[s[4]||(s[4]=t("div",{class:"empty-icon"},"ğŸ“¦",-1)),s[5]||(s[5]=t("h2",null,"æš‚æ— è®¢å•",-1)),s[6]||(s[6]=t("p",null,"å¿«å»æŒ‘é€‰ä¸€äº›ç¾é£Ÿå§ï¼",-1)),I(O,{to:"/menu",class:"browse-menu-btn"},{default:S(()=>[...s[3]||(s[3]=[w("æµè§ˆèœå•",-1)])]),_:1})])):(l(),o("div",E,[(l(!0),o(v,null,m(h.value,n=>(l(),o("div",{key:n.orderId,class:"order-card"},[t("div",H,[t("div",J,[t("h3",null,"è®¢å•å·ï¼š"+a(n.orderId),1),t("p",P,a(M(n.orderTime)),1)]),t("div",{class:g(["order-status",x(n.status)])},a(T(n.status)),3)]),t("div",G,[t("div",K,[(l(!0),o(v,null,m(n.items,d=>(l(),o("div",{key:d.id,class:"order-item"},[t("span",Q,a(d.name)+" Ã— "+a(d.quantity),1),t("span",U,"Â¥"+a((d.price*d.quantity).toFixed(2)),1)]))),128))]),t("div",W,[t("div",X,[s[7]||(s[7]=t("span",null,"é…é€åœ°å€",-1)),t("span",Y,a(n.address),1)]),t("div",Z,[s[8]||(s[8]=t("span",null,"è”ç³»ç”µè¯",-1)),t("span",null,a(n.phone),1)]),t("div",tt,[s[9]||(s[9]=t("span",null,"æ”¯ä»˜æ–¹å¼",-1)),t("span",null,a(F(n.paymentMethod)),1)]),n.notes?(l(),o("div",st,[s[10]||(s[10]=t("span",null,"è®¢å•å¤‡æ³¨",-1)),t("span",et,a(n.notes),1)])):r("",!0)]),t("div",nt,[t("div",at,[s[11]||(s[11]=t("span",null,"å•†å“æ€»é¢",-1)),t("span",null,"Â¥"+a(n.subtotal?.toFixed(2)||"0.00"),1)]),t("div",ot,[s[12]||(s[12]=t("span",null,"é…é€è´¹",-1)),n.deliveryFee>0?(l(),o("span",lt,"Â¥"+a(n.deliveryFee?.toFixed(2)||"0.00"),1)):(l(),o("span",it,"å…è´¹"))]),n.discount>0?(l(),o("div",dt,[s[13]||(s[13]=t("span",null,"ä¼˜æƒ å‡å…",-1)),t("span",null,"-Â¥"+a(n.discount?.toFixed(2)||"0.00"),1)])):r("",!0),t("div",rt,[s[14]||(s[14]=t("span",null,"å®ä»˜é‡‘é¢",-1)),t("span",null,"Â¥"+a(n.total?.toFixed(2)||"0.00"),1)])])]),t("div",ut,[n.status==="delivered"?(l(),o("button",ct," ğŸ” å†æ¬¡ä¸‹å• ")):r("",!0),n.status==="preparing"||n.status==="on_the_way"?(l(),o("button",pt," ğŸ“ è·Ÿè¸ªè®¢å• ")):r("",!0),s[15]||(s[15]=t("button",{class:"action-btn contact-btn"}," ğŸ“ è”ç³»å•†å®¶ ",-1))])]))),128))]))])])}}}),yt=V(vt,[["__scopeId","data-v-fb998191"]]);export{yt as default};
