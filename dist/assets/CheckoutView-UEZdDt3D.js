import{d as O,u as U,s as q,x as N,c as l,a as e,e as B,y as R,l as d,v as r,F as f,r as b,m as x,t as a,p as y,q as z,j as J,f as v,o as i,n as S,z as C,_ as L}from"./index-DKfT9gvk.js";const j={class:"checkout-view"},A={class:"container"},E={class:"checkout-content"},G={class:"checkout-form"},H={class:"form-section"},K={class:"form-row"},P={class:"form-group"},Q={class:"form-group"},W={class:"form-group"},X={class:"form-row"},Y={class:"form-group"},Z={class:"form-group"},$={class:"form-section"},ee={class:"delivery-options"},se=["value"],te={class:"option-content"},oe={class:"option-title"},ae={class:"option-time"},le={class:"form-section"},ie={class:"payment-options"},ne=["value"],de={class:"method-content"},re={class:"method-icon"},ue={class:"method-name"},ve={key:0,class:"method-description"},ce={class:"form-section"},pe={class:"form-group"},me={class:"form-actions"},ye=["disabled"],_e={class:"order-summary"},he={class:"order-items"},fe={class:"item-info"},be={class:"item-name"},ge={class:"item-price"},ke={key:0,class:"item-notes"},we={class:"summary-details"},xe={class:"summary-row"},Se={class:"summary-row"},Ce={key:0},Me={key:1,class:"free"},Ve={key:0,class:"summary-row discount"},Ie={class:"summary-row total"},Te={class:"delivery-estimate"},Fe={class:"estimated-time"},De={key:0,class:"address-preview"},Oe=O({__name:"CheckoutView",setup(Ue){const _=z(),g=U(),{cartItems:c,cartTotal:u}=q(g),{clearCart:M}=g,V=[{value:"asap",title:"å°½å¿«é€è¾¾",time:"çº¦30åˆ†é’Ÿ"},{value:"specific",title:"æŒ‡å®šæ—¶é—´",time:"ä»Šå¤© 18:00-19:00"},{value:"later",title:"ç¨åé€è¾¾",time:"ä»Šå¤© 20:00-21:00"}],I=[{id:"alipay",name:"æ”¯ä»˜å®",icon:"ğŸ’³",description:"æ¨èä½¿ç”¨"},{id:"wechat",name:"å¾®ä¿¡æ”¯ä»˜",icon:"ğŸ’°"},{id:"cash",name:"è´§åˆ°ä»˜æ¬¾",icon:"ğŸ’µ",description:"ç°é‡‘æ”¯ä»˜"},{id:"card",name:"åœ¨çº¿æ”¯ä»˜",icon:"ğŸ’³"}],o=J({name:"",phone:"",address:"",apartment:"",postalCode:"",deliveryTime:"asap",paymentMethod:"alipay",notes:""}),p=v(()=>u.value>50?0:5),m=v(()=>u.value>100?10:0),k=v(()=>Math.max(0,u.value+p.value-m.value)),T=v(()=>{const n=new Date;return n.setMinutes(n.getMinutes()+30),n.toLocaleTimeString("zh-CN",{hour:"2-digit",minute:"2-digit"})}),w=v(()=>o.value.name.trim()&&o.value.phone.trim()&&o.value.address.trim()&&c.value.length>0);N(()=>{c.value.length===0&&_.push("/cart")});const F=()=>{_.push("/cart")},D=async()=>{if(w.value)try{const n={...o.value,items:c.value,subtotal:u.value,deliveryFee:p.value,discount:m.value,total:k.value,orderTime:new Date().toISOString(),orderId:"ORD"+Date.now().toString().slice(-8)},s=JSON.parse(localStorage.getItem("foodOrders")||"[]");s.unshift(n),localStorage.setItem("foodOrders",JSON.stringify(s)),M(),_.push({path:"/orders",query:{orderId:n.orderId,success:"true"}})}catch(n){console.error("ä¸‹å•å¤±è´¥:",n),alert("ä¸‹å•å¤±è´¥ï¼Œè¯·ç¨åé‡è¯•")}};return(n,s)=>(i(),l("div",j,[e("div",A,[s[24]||(s[24]=B('<div class="checkout-header" data-v-0c1e91c5><h1 data-v-0c1e91c5>ç¡®è®¤è®¢å•</h1><div class="checkout-steps" data-v-0c1e91c5><div class="step active" data-v-0c1e91c5>1. è´­ç‰©è½¦</div><div class="step active" data-v-0c1e91c5>2. ä¿¡æ¯å¡«å†™</div><div class="step" data-v-0c1e91c5>3. æ”¯ä»˜</div><div class="step" data-v-0c1e91c5>4. å®Œæˆ</div></div></div>',1)),e("div",E,[e("div",G,[e("form",{onSubmit:R(D,["prevent"])},[e("div",H,[s[13]||(s[13]=e("h2",null,"é…é€ä¿¡æ¯",-1)),e("div",K,[e("div",P,[s[8]||(s[8]=e("label",{for:"name"},"æ”¶è´§äººå§“å *",-1)),d(e("input",{id:"name","onUpdate:modelValue":s[0]||(s[0]=t=>o.value.name=t),type:"text",required:"",placeholder:"è¯·è¾“å…¥æ”¶è´§äººå§“å"},null,512),[[r,o.value.name]])]),e("div",Q,[s[9]||(s[9]=e("label",{for:"phone"},"è”ç³»ç”µè¯ *",-1)),d(e("input",{id:"phone","onUpdate:modelValue":s[1]||(s[1]=t=>o.value.phone=t),type:"tel",required:"",placeholder:"è¯·è¾“å…¥è”ç³»ç”µè¯"},null,512),[[r,o.value.phone]])])]),e("div",W,[s[10]||(s[10]=e("label",{for:"address"},"é…é€åœ°å€ *",-1)),d(e("input",{id:"address","onUpdate:modelValue":s[2]||(s[2]=t=>o.value.address=t),type:"text",required:"",placeholder:"è¯·è¾“å…¥è¯¦ç»†åœ°å€"},null,512),[[r,o.value.address]])]),e("div",X,[e("div",Y,[s[11]||(s[11]=e("label",{for:"apartment"},"é—¨ç‰Œå·",-1)),d(e("input",{id:"apartment","onUpdate:modelValue":s[3]||(s[3]=t=>o.value.apartment=t),type:"text",placeholder:"å¦‚ï¼šAæ ‹201å®¤"},null,512),[[r,o.value.apartment]])]),e("div",Z,[s[12]||(s[12]=e("label",{for:"postalCode"},"é‚®æ”¿ç¼–ç ",-1)),d(e("input",{id:"postalCode","onUpdate:modelValue":s[4]||(s[4]=t=>o.value.postalCode=t),type:"text",placeholder:"é‚®æ”¿ç¼–ç "},null,512),[[r,o.value.postalCode]])])])]),e("div",$,[s[14]||(s[14]=e("h2",null,"é…é€æ—¶é—´",-1)),e("div",ee,[(i(),l(f,null,b(V,t=>e("label",{key:t.value,class:S(["delivery-option",{active:o.value.deliveryTime===t.value}])},[d(e("input",{type:"radio","onUpdate:modelValue":s[5]||(s[5]=h=>o.value.deliveryTime=h),value:t.value,class:"radio-input"},null,8,se),[[C,o.value.deliveryTime]]),e("div",te,[e("span",oe,a(t.title),1),e("span",ae,a(t.time),1)])],2)),64))])]),e("div",le,[s[15]||(s[15]=e("h2",null,"æ”¯ä»˜æ–¹å¼",-1)),e("div",ie,[(i(),l(f,null,b(I,t=>e("label",{key:t.id,class:S(["payment-method",{active:o.value.paymentMethod===t.id}])},[d(e("input",{type:"radio","onUpdate:modelValue":s[6]||(s[6]=h=>o.value.paymentMethod=h),value:t.id,class:"radio-input"},null,8,ne),[[C,o.value.paymentMethod]]),e("div",de,[e("span",re,a(t.icon),1),e("span",ue,a(t.name),1),t.description?(i(),l("span",ve,a(t.description),1)):y("",!0)])],2)),64))])]),e("div",ce,[s[16]||(s[16]=e("h2",null,"è®¢å•å¤‡æ³¨",-1)),e("div",pe,[d(e("textarea",{"onUpdate:modelValue":s[7]||(s[7]=t=>o.value.notes=t),placeholder:"å¦‚æœ‰ç‰¹æ®Šè¦æ±‚ï¼Œè¯·åœ¨æ­¤è¯´æ˜ï¼ˆå¦‚ï¼šä¸è¦è¾£ã€ä¸è¦è‘±èŠ±ç­‰ï¼‰",rows:"3",class:"notes-input"},null,512),[[r,o.value.notes]])])]),e("div",me,[e("button",{type:"button",onClick:F,class:"back-btn"}," â† è¿”å›è´­ç‰©è½¦ "),e("button",{type:"submit",class:"submit-btn",disabled:!w.value}," ç¡®è®¤è®¢å• â†’ ",8,ye)])],32)]),e("div",_e,[s[23]||(s[23]=e("h2",null,"è®¢å•è¯¦æƒ…",-1)),e("div",he,[(i(!0),l(f,null,b(x(c),t=>(i(),l("div",{key:t.id,class:"order-item"},[e("div",fe,[e("span",be,a(t.name)+" Ã— "+a(t.quantity),1),e("span",ge,"Â¥"+a((t.price*t.quantity).toFixed(2)),1)]),t.specialInstructions?(i(),l("div",ke,a(t.specialInstructions),1)):y("",!0)]))),128))]),e("div",we,[e("div",xe,[s[17]||(s[17]=e("span",null,"å•†å“å°è®¡",-1)),e("span",null,"Â¥"+a(x(u).toFixed(2)),1)]),e("div",Se,[s[18]||(s[18]=e("span",null,"é…é€è´¹",-1)),p.value>0?(i(),l("span",Ce,"Â¥"+a(p.value.toFixed(2)),1)):(i(),l("span",Me,"å…è´¹"))]),m.value>0?(i(),l("div",Ve,[s[19]||(s[19]=e("span",null,"ä¼˜æƒ å‡å…",-1)),e("span",null,"-Â¥"+a(m.value.toFixed(2)),1)])):y("",!0),s[21]||(s[21]=e("div",{class:"summary-divider"},null,-1)),e("div",Ie,[s[20]||(s[20]=e("span",null,"è®¢å•æ€»è®¡",-1)),e("span",null,"Â¥"+a(k.value.toFixed(2)),1)])]),e("div",Te,[s[22]||(s[22]=e("h3",null,"é¢„è®¡é€è¾¾",-1)),e("p",Fe,a(T.value),1),o.value.address?(i(),l("p",De," é€è‡³ï¼š"+a(o.value.address),1)):y("",!0)])])])])]))}}),Ne=L(Oe,[["__scopeId","data-v-0c1e91c5"]]);export{Ne as default};
